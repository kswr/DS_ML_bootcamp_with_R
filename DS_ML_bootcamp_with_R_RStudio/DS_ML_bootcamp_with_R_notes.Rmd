---
title: "Data Science and Machine Learning Bootcamp with R"
output: 
    html_notebook:
        toc: true
---

[Course dashboard](https://www.udemy.com/data-science-and-machine-learning-bootcamp-with-r/learn/v4/overview)

## Section 1 - Course Introduction

### Lecture 1 - Introduction to Course

Author - [Jose Portilla](http://www.pieriandata.com/)

Couse is suitable for:

- Developers who want to learn about Machine Learning
- Complete begginers who wan't to learn coding and ML

Course covers:

- R programming
- Machine Learning
- Data Visualization

Including:

- Basic R programming topics
- Data visualisation in R
- Linear regression
- Regression trees
- Random forests
- Neural networks
- Web Data Mining

Course includes:

- ML Portfolio projects
- R Programming Exercises
- Capstone Data Projects
- Over 100HD Video Lectures
- Code and Explanation Notebooks for each video
- Certificate of Completion

### Lecture 2 - Course Curriculum

Sections:

1. Course Introduction
    - what is Data Science
    - Course FAQs
2. Course Best Practices
    - How to Get Help in the Course
3. Windows Installation Set-Up
    - installation
4. Mac OS Installation Set-Up
    - installation
5. Linux Installation
    - installation
6. Development Environment Overview
7. Introduction to R Basics
    - basic R
8. R Matrices
    - basic R
9. R Data Frames
    - basic R
10. R Lists
    - basic R
11. Data Input and Output with R
    - basic R
    - CSV
    - Excel
    - SQL
    - Web Scraping
12. R Programming Basics
    - basic programming
        - funtions
        - loops
        - statements
    - data manipulation
13. Advanced R Programming
    - advanced programming
14. Data Manipulation with R
    - data handling and manipulation
15. Data Visualization with R
    - ggplot
16. Data Visualization Project
    - project
17. Interactive Visualizations with Plotly
    -Plotly
18. Capstone Data Project
    - project
19. Introduction to Machine Learning with R
20. Machine Learning with R - Linear Regression
21. Machine Learning Project - Linear Regression
22. Machine Learning with R - Logistic Regression
23. Machine Learning Project - Logistic Regression
24. Machine Learning with R - K Nearest Neighbors
25. Machine Learning Project - K Nearest Neighbors
26. Machine Learning with R - Decision Trees and Random Forests
27. Machine Learning Project - Decision Trees and Random Forests
28. Machine Learning with R - Support Vector Machines
29. Machine Learning Project - Support Vector Machines
30. Machine Learning with R - K-means Clustering
31. Machine Learning Project - K-means Clustering
32. Machine Learning with R - Natural Language Processing
33. Machine Learning with R - Neural Nets
34. Machine Learning Project - Neural Nets
35. Bonus Section - Discounts for Other Courses

### Lecture 3 - What is Data Science (skipped)

### Lecture 4 - Course FAQ (skipped)

1. Where can I download R and RStudio?
2. Where can I get the Course Notes?
3. Why are the Course Notes in HTML?
4. How do I get a certificate of Completion? 

## Section 2 - Course Best Practices

### Lecture 5 - How to Get Help in the Course! (skipped)

### Quiz 1: Welcome to the Course (skipped)

### Lecture 6 - Installation and Set-Up (skipped)

## Section 3 - Windows Installation Set-Up

### Lecture 7 - Windows Installation Procedure (skipped)

## Section 4 - Mac OS Installation Set-Up

### Lecture 8 - Mac OS Installation Procedure (skipped)

## Section 5 - Linux Installation

### Lecture 9 - Linux/Unbuntu Installation Procedure (skipped)

## Section 6 - Development Environment Overview

### Lecture 10 - Development Environment Overview

Overview of 2 following lessons

### Lecture 11 - Course Notes

How to get - resources section of the course

Most lessons have corresponding notebook containing code from the lecture

Notebooks contain:

- Exercises
- Answers to exercises
- Projects input data
- Projects output data
- Sample projects

### Lecture 12 - Guide to RStudio (skipped)

## Section 7 - Introduction to R Basics

[notebooks for this section](..\R-for-Data-Science-and-Machine-Learning\Basics of R and Data Types\R Basics)

### Lecture 13 - Introduction to R Basics

Structure of the notes

### Lecture 14 - Arithmetic with R

Modulo (remainder)
```{r}
5 %% 2
```

Qutient (pl. iloraz)
```{r}
5 %/% 2
```

### Lecture 15 - Variables

Variable naming in allows usage of

- downcase letters
- uppercase letters
- `_` underscore
- `.` dot

### Lecture 16 - R Data Types

To check class of object use `class()` function

### Lecture 17 - Vector Basics

How to construct vector using `c()` (combine) function and assign name to each element of the vector

#### Creating Vectors

Vector - One dimensional array that can hold character, numeric or boolean datatypes

If vector contains various datatypes on input, it truncates all data to one datatype

#### Assigning names to elements of the vector

```{r}
# creating vector
temps <- c(72,71,68,73,69,75,76)
temps
# asigning names
days <- c('Mon','Tue','Wed','Thu','Fri','Sat','Sun')
names(temps) <- days
temps
class(temps)
# accesing value of named element of the vector
temps['Wed']
```

### Lecture 18 - Vector Operations

`prod()` - gives product of all elements of the vector

[CRAN R Reference Card](https://cran.r-project.org/doc/contrib/Short-refcard.pdf)

- built in functions references

### Lecture 19 - Vector Indexing and Slicing

Filtering
```{r}
v <- c(1,2,3,4)
names(v) <- c('a','b','c','d')
v
my.filter <- v>2
# accessing only elements > 2
v[v>2]
v[my.filter]
```

### Lecture 20 - Getting Help with R

Use `help()` function

E.g. `help('vector')`

`help.search()`  or `??<name>` looks for all related articles

### Lecture 21 - Comparison Operators

`> < >= <= == !=`

### Lecture 22 - R Basics Training Exercise

Explanation of usage of exercises in course notes

Exercises:

What is two to the power of five?
```{r}
2^5
```

Create a vector called stock.prices with the following data points: 23,27,23,21,34
```{r}
stock.prices <- c(23,27,23,21,34)
stock.prices
```

Assign names to the price data points relating to the day of the week, starting with Mon, Tue, Wed, etc...

```{r}
names(stock.prices) <- c('Mon','Tue','Wed','Thu','Fri')
stock.prices
```

What was the average (mean) stock price for the week? (You may need to reference a built-in function)

```{r}
mean(stock.prices)
```

Create a vector called over.23 consisting of logicals that correspond to the days where the stock price was more than $23

```{r}
over.23 <- stock.prices > 23
over.23
```

Use the over.23 vector to filter out the stock.prices vector and only return the day and prices where the price was over $23

```{r}
stock.prices[over.23]
```

Use a built-in function to find the day the price was the highest

```{r}
stock.prices[stock.prices == max(stock.prices)]
```

### Lecture 23 - R Basics Training Exercise - Solutions Walkthrough

## Section 8 - R Matrices

### Lecture 24 - Introduction to R Matrices

Matrices let us store data 2-dimensionally

### Lecture 25 - Creating a Matrix

Basics
```{r}
# creating a matrix
matrix(1:10,nrow=2)
# byrow parameter tells us if matrix should be filled up by row or by column
# F is default value
matrix(1:12, byrow = F, nrow = 3)
# TRUE
matrix(1:12, byrow = T, nrow = 3)
```

```{r}
# some made-up stock values
goog <- c(450,451,452,445,468)
msft <- c(230,231,232,233,220)
stocks <- c(goog,msft)
stocks 

# creating a matrix
stock.matrix <- matrix(stocks,byrow = T, nrow = 2)
stock.matrix

# naming columns and rows
# names() function is applicable, but we will use other functions
days <- c('Mon','Tue','Wed','Thu','Fri')
st.names <- c('GOOG','MSFT')
colnames(stock.matrix) <- days
rownames(stock.matrix) <- st.names
stock.matrix
```

### Lecture 26 - Matrix Arithmetic

```{r}
# creating a matrix
mat <- matrix(1:25, byrow = T, nrow = 5)
mat
mat*2
mat/2
mat^2
1/mat
# comparing matrix outputs logicals matrix
mat > 15 
# print all > 15 from matrix
mat[mat>15]
# adding matrices
mat + mat
# adding to the value of matrix
mat + 2
mat ^ mat
# not true matrix multiplication, but element by element
mat * mat
# real matrix multiplication and matrix multiplication operator
mat %*% mat
```

### Lecture 27 - Matrix Operations

Basic operations acros columns and rows
```{r}
# column totals
colSums(stock.matrix)
# row totals
rowSums(stock.matrix)
# column means
colMeans(stock.matrix)
# row means
rowMeans(stock.matrix)
```

Bindings new rows and columns

- column bind - `cbind()`
- row bind:
```{r}
# row bind
FB <- c(111,112,113,120,145)
tech.stocks <- rbind(stock.matrix,FB)
tech.stocks
# name of new row comes from name of binded vector

# column bind
avg <- rowMeans(tech.stocks)
tech.stocks <- cbind(tech.stocks,avg)
tech.stocks
# name of new columns comes from name of binded vector
```

### Lecture 28 - Matrix Selection and Indexing

```{r}
# creating matrix
mat <- matrix(1:50,byrow=T,nrow=5)
# first row
mat[1,]
# first column
mat[,1]
# first 3 rows
mat[1:3,]
# first 3 columns from first 3 rows
mat[1:3,1:3]
# last 2 columns
mat[,9:10]
```

### Lecture 29 - Factor and Categorical Matrices

`factor()` - useful for creating categorical matrices during data analysis and ML (usualy for dummy variables)

**Nominal** categorical variables - don't have any order
```{r}
animal <- c('d','c','d','c','c')
# factor() returns vector and levels
fact.ani <- factor(animal)
fact.ani
```

**Ordinal** categorical variables - have order
```{r}
temps <- c('cold','med','hot','hot','hot','cold','med')
fact.temps <- factor(temps, ordered = T, levels = c('cold','med','hot'))
fact.temps
# summary() returns levels and their number of appearances for factorized variables
summary(fact.temps)
# and length, class and mode for unfactorized variables
summary(temps)
```

### Lecture 30 - R Matrix Exercises

Ex 1: Create 2 vectors A and B, where A is (1,2,3) and B is (4,5,6). With these vectors, use the cbind() or rbind() function to create a 2 by 3 matrix from the vectors. You'll need to figure out which of these binding functions is the correct choice.

```{r}
A <- c(1,2,3)
B <- c(4,5,6)
AB <- rbind(A,B)
AB
```

Ex 2: Create a 3 by 3 matrix consisting of the numbers 1-9. Create this matrix using the shortcut 1:9 and by specifying the nrow argument in the matrix() function call. Assign this matrix to the variable mat

```{r}
mat <- matrix(1:9,nrow=3)
mat
```

Ex 3: Confirm that mat is a matrix using is.matrix()

```{r}
is.matrix(mat)
```

Ex 4: Create a 5 by 5 matrix consisting of the numbers 1-25 and assign it to the variable mat2. The top row should be the numbers 1-5.

```{r}
mat2 <- matrix(1:25, byrow = T, nrow = 5)
mat2
```

Ex 5: Using indexing notation, grab a sub-section of mat2 from the previous exercise that looks like this

```{r}
mat2[2:3,2:3]
```

Ex 6: Using indexing notation, grab a sub-section of mat2 from the previous exercise that looks like this:


```{r}
mat2[4:5,4:5]
```

What is the sum of all the elements in mat2?

```{r}
sum(mat2)
```

Ex 8: Ok time for our last exercise! Find out how to use runif() to create a 4 by 5 matrix consisting of 20 random numbers (4*5=20).

```{r}
mat3 <- matrix(runif(20,0,100),nrow = 4)
mat3
```

### Lecture 31 - Matrix Training Exercises - Solutions Walkthrough

Ok

## Section 9 - R Data Frames

### Lecture 32 - Introduction to R Data Frames

Introduction to section

### Lecture 33 - Data Frame Basics

Matrix has to hold data of one datatype

Data Frame can hold various datatypes

To list all built-in data frames: `data()`

To list beginning or end of data frame use `head()` or `tail()` functions respectively

Strucuture of data frame: `str()`

Summary of data frame: `summary()`

Creating data frame:
```{r}
days <- c('Mon','Tue','Wed','Thur','Fri')
temp <- c(22.2,21,23,24.3,25)
rain <- c(T,T,F,F,T)
df <- data.frame(days,temp,rain)
df
str(df)
summary(df)
```

### Lecture 34 - Data Frames Selection and Indexing

Slicing
```{r}
# bracket notation returns data in data frame format
df[1,]
df[,1]
df[1,'days']
df['days']
df[,c('days','temp')]
```

Filtering
```{r}
subset(df,subset = rain == T)
subset(df, subset = temp>23)
```

Ordering
```{r}
# ascending
sorted.temp <- order(df['temp'])
sorted.temp
df[sorted.temp,]
# descending
desc.temp <- order(-df['temp'])
df[desc.temp,]
# $ notation ascending
df[order(df$temp),]
# $ notation descending
df[order(-df$temp),]
```

### Lecture 35 - Overview of Data Frame Operations - Part 1

#### Creating Data Frames

```{r}
# empty data frame
empty <- data.frame()
# frame from vector
c1 <- 1:10
c2 <- letters[1:10]
df <- data.frame(col.name.1 = c1, col.name.2 = c2)
```

#### Importing and exporting data

Read from csv - `read.csv()`
Write to csv - `write.csv()` - writes with index

#### Gettin information about data frame

`nrow()` - number of rows
`ncol()` - number of columns
`rownames()` - names of rows
`colnames()` - names of columns
`str()` - structure of dataframe
```{r}
# number of rows
nrow(df)
# number of columns (without index)
ncol(df)
# names of rows
rownames(df)
# names of columns
colnames(df)
# structure of data frame
str(df)
# statistical summary of data frame
summary(df)
```

#### Referencing Cells

```{r}
# using indexes
df[5,2]
# using names
df[5,"col.name.1"]
# overwriting values
df[2,"col.name.1"] <- 9999
```

#### Referencing rows

```{r}
# first row - returns data frame format
df[1,]
```

#### Referencing columns

Doble set of brackets returns vector set of values
Single set of brakcets returns data frame

```{r}
# brackets and index
df[,1]
# brakcets and name
df[,"col.name.1"]
# double brakcets with name
df[["col.name.1"]]
# $ notation
df$col.name.1
# brackets and index v.2 - returns data frame format
df[1]
df[1:2]
df[c(1,2)]
# brackets and name v.2 - returns data frame format
df['col.name.1']
df[c('col.name.1','col.name.2')]
```

### Lecture 36 - Overview of Data Frame Operations - Part 2

#### Adding Rows

```{r}
# rbind()
df2 <- data.frame(col.name.1 = 2000, col.name.2 = 'new')
dfnew <- rbind(df,df2)
```

#### Adding Columns

```{r}
# can be addressed using $ notation, brackets or double brackets notation
df$newcol <- 2*df$col.name.1
df
```

#### Renaming Columns

```{r}
# all columns
colnames(df) <- c('1','2','3')
# one column, using index
colnames(df)[1] <- 'New_col_name'
```

#### Selecting Multiple Rows
```{r}
df[1:10,]
# first seven rows
head(df,7)
# select everything but some rows
df[-2,]
# conditional row selecting (filtering)
mtcars[mtcars$mpg > 20,]
mtcars[mtcars$mpg > 20 & mtcars$cyl == 6,]
# using subset()
subset(mtcars, mpg > 20 & cyl == 6)
```

#### Dealing with missing data

Detect 'Na' anywhere in data frame
```{r}
# is.na(mtcars)
any(is.na(mtcars))
# in any column
any(is.na(mtcars$mpg))
```

Replace all nulls with given value
```{r}
# with 0
df[is.na(df)] <- 0
# with mean value (useful in statistics)
mtcars$mpg[is.na(mtcars$mpg)] <- mean(mtcars$mpg)
```

### Lecture 37 - R Data Frames Training Exercise

Ex 1: Recreate the following dataframe by creating vectors and using the data.frame function:

```{r}
df.rownames <- c('Sam','Frank','Amy')
Age <- c(22,25,26)
Weight <- c(150,165,120)
Sex <- c('M','M','F')
df <- data.frame(Age,Weight,Sex)
rownames(df) <- df.rownames
df
```

Ex 2: Check if mtcars is a dataframe using is.data.frame()

```{r}
is.data.frame(mtcars)
```

Ex 3: Use as.data.frame() to convert a matrix into a dataframe:

```{r}
mat <- matrix(1:25,nrow = 5)
df <- as.data.frame(mat)
df
```

Ex 4: Set the built-in data frame mtcars as a variable df. We'll use this df variable for the rest of the exercises.

```{r}
df <- mtcars  
```

Ex 5: Display the first 6 rows of df

```{r}
head(df,6)
```

Ex 6: What is the average mpg value for all the cars?

```{r}
mean(df$mpg)
```

Ex 7: Select the rows where all cars have 6 cylinders (cyl column)

```{r}
df[df$cyl==6,]
```

Ex 8: Select the columns am,gear, and carb.

```{r}
df[,c('am','gear','carb')]
```

Ex 9: Create a new column called performance, which is calculated by hp/wt.

```{r}
df$performance <- df$hp/df$wt
df
```

Ex 10: Your performance column will have several decimal place precision. Figure out how to use round() (check help(round)) to reduce this accuracy to only 2 decimal places.

```{r}
df$performance <- round(df$performance,2)
df
```

Ex 10: What is the average mpg for cars that have more than 100 hp AND a wt value of more than 2.5.

```{r}
mean(df[df$hp > 100 & df$wt > 2.5,'mpg'])
```

Ex 11: What is the mpg of the Hornet Sportabout?

```{r}
df['Hornet Sportabout','mpg']
```


### Lecture 38 - Data Frame Training Exercises - Solutions Walkthrough

## Section 10 - R Lists

### Lecture 39 - List Basics

List - object for storing various datatypes

Creating list
```{r}
v <- c(1,2,3)
m <- matrix(1:10,nrow=2)
df <- mtcars
my.list <- list(v,m,df)
```

Naming list
```{r}
my.named.list <- list(sample_vec= v, my.matrix = m, sample.df = df)
my.named.list
```

Accessing elements of the list
```{r}
# $ notation returns the object stored in the list
my.named.list$sample.df
class(my.named.list$sample.df)
# double brackets notation returns the object stored in the list
class(my.named.list[[1]])
# brackets notation returns list element containing the object
my.list[1]
my.named.list[1]
my.named.list['sample.vec'] 
class(my.named.list[1])
```

Combining lists
```{r}
double.list <- c(my.named.list,my.named.list)
```

Structure and summary of the list
```{r}
str(my.named.list)
summary(my.named.list)
```

## Section 11 - Data Input and Output with R

### Lecture 40 - Introduction to Data Input and Output with R

This section covers reading and writing data to files (as the name implies)

### Lecture 41 - CSV Input and Output

CSV - comma separated variable

Reading CSV
```{r}
# sample CSV file
write.csv(mtcars,file='my_example.csv')
ex <- read.csv('my_example.csv')
```

Writing to CSV
```{r}
write.csv(ex,file = 'my_new_example.csv')
```

### Lecture 42 - Excel files in R

#### Reading Excel files

Install package `readxl` and load it to read Excel files with R
```{r, include=FALSE}
# install.packages('readxl')
library(readxl)
```

Read simple sheet from xlsx file
```{r}
# list available sheets
excel_sheets('Sample-Sales-Data.xlsx')
# read data
df <- read_xlsx('Sample-Sales-Data.xlsx',sheet = 'Sheet1')
str(df)
```

Read whole xlsx file as list with sheets as data frames using `lapply()`
```{r}
entire.workbook <- lapply(excel_sheets('Sample-Sales-Data.xlsx'), read_excel, path = 'Sample-Sales-Data.xlsx')
str(entire.workbook)
```

#### Writing to Excel files

Install package `xlsx` and load it to write to Excel files
```{r, include=FALSE}
# install.packages('xlsx')
library(xlsx)
```

Writing
```{r}
write.xlsx(mtcars,"output_example.xlsx")
```

### Lecture 42 - SQL with R (do it yourself)

#### Genereal Use - RODBC

`odbcConnect` - connection to database parameters
`sqlFetch` - connection to table
`sqlQuery` - SQL query
`close(<odbcConnection name>)` - closing connection function

#### Specific packages

Each DB connection requires specific package, such as `RMySQL`, `ROracle` or `RJDBC`

Then do independent research using Google on how to use given package

### Lecture 43 - Web Scraping with R (do it yourself using notebook)

Required knowledge: HTML, CSS, R pipe operator `%<%`

Automated scrapping tool - [import.io](https://www.import.io/)

Install and load `rvest` library
```{r, include=FALSE}
# install.packages('rvest', dependencies=TRUE, repos='http://cran.rstudio.com/')
library(rvest)
```

Load demo
```{r}
demo(package='rvest', topic='tripadvisor')
```

## Section 12 - R Programming Basics

### Lecture 45 - Introduction to Programming Basics

Lessons structure

- syntax description for Programmers
- concept explaination for begginers

### Lecture 46 - Logical Operators

R supports 
- `&` for AND 
- `|` for OR 
- `!` for NOT

Combining multiple comparison and logical operators
```{r}
x <- 10
x < 20
x > 5
x < 20 & x > 5
x < 20 & x > 5 & x == 10
```

### Lecture 47 - If, else and else if Statements

Syntax
```{r}
x <- 13
if (x==10){
  # code
  print('X is equal to 10!')
} else if (x == 12) {
  print('X is equal to 12!')
} else{
  print('X is not equal to 10 or 12')
}
```

### Lecture 48 - Conditional Statements Training Exercise

Ex 1: Write a script that will print "Even Number" if the variable x is an even number, otherwise print "Not Even":
```{r}
x <- 3
if (x%%2==0){
  print ("Even Number")
} else {
  print ("Not Even")
}
```

Ex 2: Write a script that will print 'Is a Matrix' if the variable x is a matrix, otherwise print "Not a Matrix". Hint: You may want to check out help(is.matrix)

```{r}
x <- matrix()
if (is.matrix(x)){
  print ("Is a Matrix")
} else {
  print ("Not a Matrix")
}
```

Ex 3: Create a script that given a numeric vector x with a length 3, will print out the elements in order from high to low. You must use if,else if, and else statements for your logic. (This code will be relatively long)

Using built-in function (wrong answer)
```{r}
x <- c(3,7,1)
if (length(x)==3){
  print (x[order(-x)])
}
```

Using if, else if:
```{r}
x <- c(7,3,1)
if (length(x)==3){
  if (x[1] > x[2] & x[1] > x[3]){
    if (x[2] > x[3]) {
      print(x[c(1,2,3)])
    } else {
      print(x[c(1,3,2)])
    }
  } else if (x[2] > x[3]){
    if (x[3] > x[1]) {
      print(x[c(2,3,1)])
    } else {
      print(x[c(2,1,3)])
    }
  } else {
    if (x[2] > x[1]){
      print(x[c(3,2,1)])
    } else{
      print(x[c(3,1,2)])
    }
  }
}
```

Ex 4: Write a script that uses if,else if, and else statements to print the max element in a numeric vector with 3 elements.

```{r}
x <- c(20,10,1)
if (length(x) == 3){
  if (x[1]>x[2] & x[1] > x[3]) {
    print(x[1])
  } else if (x[2]>x[3]){
    print(x[2])
  } else {
    print(x[3])
  }
}
```

### Lecture 49 - Conditional Statements Exercises - Solutions Walkthrough

Ok

### Lecture 50 - While Loops

Syntax
```{r}
x <- 0
while(x<=10){
  print(paste0('X is: ',x))
  x <- x+1
}
```

`break` statement
```{r}
x <- 0
while(T){
  print(x)
  if(x==10){
    break
  }
  x <- x+1
}
```

### Lecture 51 - For Loop

Syntax
```{r}
v <- c(1,2,3)
for(variable in v){
  print(variable)
}
```

### Lecture 52 - Functions

Syntax
```{r}
# parameters with default value should be placed on the end
name_of_func <- function (input1,input2,input3=45){
  result <- input1 + input2 + input3
  return(result)
}

name_of_func(1,2)
name_of_func(1,2,3)
```

### Lecture 53 - Functions Training Exercise

Ex 1: Create a function that will return the product of two integers.

```{r}
prod <- function (x,y){
  p <- x*y
  return(p)
}

prod(3,4)
```

Ex 2: Create a function that accepts two arguments, an integer and a vector of integers. It returns TRUE if the integer is present in the vector, otherwise it returns FALSE. Make sure you pay careful attention to your placement of the return(FALSE) line in your function!

First solution
```{r}
num_check <- function(x,y)
  return(is.element(x,y))

num_check(2,c(1,2,3))
num_check(2,c(1,4,5))
```

Second solution
```{r}
num_check <- function(x,y)
  if(x %in% y){
    return(T)
  } else{
    return(F)
  }

num_check(2,c(1,2,3))
num_check(2,c(1,4,5))
```

Ex 3: Create a function that accepts two arguments, an integer and a vector of integers. It returns the count of the number of occurences of the integer in the input vector.

```{r}
num_count <- function (x,y)
  return(length(y[y==x]))

num_count(2,c(1,1,2,2,3,3))
num_count(1,c(1,1,2,2,3,1,4,5,5,2,2,1,3))
```

Ex 4: We want to ship bars of aluminum. We will create a function that accepts an integer representing the requested kilograms of aluminum for the package to be shipped. To fullfill these order, we have small bars (1 kilogram each) and big bars (5 kilograms each). Return the least number of bars needed.  
For example, a load of 6 kg requires a minimum of two bars (1 5kg bars and 1 1kg bars). A load of 17 kg requires a minimum of 5 bars (3 5kg bars and 2 1kg bars).

```{r}
bar_count <- function (x)
  return(x %/% 5 + x %% 5)

bar_count(6)
bar_count(17)
```

Ex 5: Create a function that accepts 3 integer values and returns their sum. However, if an integer value is evenly divisible by 3, then it does not count towards the sum. Return zero if all numbers are evenly divisible by 3. Hint: You may want to use the append() function.

```{r}
summer <- function(x,y,z){
  a <- c(x,y,z)
  c <- 0
  for (b in a){
    if (b %% 3 != 0){
      c = c +b
    }
  } 
  return(c)
}

summer(7,2,3)
summer(3,6,9)
summer(9,11,12)
```

Ex 6: Create a function that will return TRUE if an input integer is prime. Otherwise, return FALSE. You may want to look into the any() function.

```{r}
prime <- function(x){
  a <- 2:(x-1)
  b <- !any(x %% a == 0)
  return(b)
}

prime(6)
prime(7)
prime(1)
```

### Lecture 54 - Functions Training Exercise - Solutions

Ok

## Section 13 - Advanced R Programming

### Lecture 55 - Introduction to Advanced R Programming

Unique R functions and features

- regular expression
- date and time expressions
- math functions
- built-in functions

### Lecture 56 - Built-in R Features

```{r}
# creating sequence
seq(0,10,by = 2)
seq(0,100,by = 100)
# sort a vector
v <- c(1,4,7,2,13,3,11)
v <- sort(v)
v
v <- sort(v,decreasing = T)
v
cv <- c('b','d','a')
sort(cv)
# reverse
v <- 1:10
rev(v)
# structure - str() - known
# append
v2 <- 11:20
append(v,v2)
# checking data type - is.<datatype> - returns T or F
is.data.frame(mtcars)
# converting - as.<dataype>
as.list(v)
```


### Lecture 57 - Apply

Apply function over a list or vector

`sample()` function - random element from given data
```{r}
print(sample(1:10,1))

```
```{r}
v <- c(1,2,3,4,5)

addrand <- function(x){
  ran <- sample(1:100,1)
  return(x+ran)
}

print(addrand(10))

# lapply() - applies function to all elements of given vector and returns list
lapply(v,addrand)

# sapply() - simple apply; returns vector
sapply(v,addrand)

times2 <- function(x){
  return(x*2)
}

result <- sapply(v,times2)
print(result)
```

There are more `apply()` functions, to list them use `help(apply)`

#### Anonymous functions

Functions to be used once (symilar to `lambda` in python)

```{r}
v <- 1:5
sapply(v,function(num){num*2})
```

#### Apply with multiple arguments

```{r}
add_choice <- function(num, choice){
  return(num+choice)
}

sapply(v,add_choice,choice=100)
```


### Lecture 58 - Math Functions in R

`abs()` - absolute value
`sum()` - sum
`mean()` - mean
`round(value, places after coma)` - round

More in CRAN reference card

### Lecture 59 - Regular Expressions

Search for patterns

Regular expression - idea of pattern searching

`grepl` - general regular expression (logical); returns boolean
`grep` - general regular expression

```{r}
text <- "Hi there, do you know who you are voting for?"
grepl('voting',text)
grep('voting',text)
grepl('dog',text)
grepl('do you',text)
# in vectors
v <- c('a','b','c','d','d')
grepl('b',v)
grep('d',v)
```


### Lecture 60 - Dates and Timestamps

#### Date objects

```{r}
# current date
Sys.Date()
# converting string to date
c <- '1990-01-01'
my.date <- as.Date(c)
my.date
class(my.date)
# converting badly formatted date
my.date <- as.Date("Nov-03-90",format = "%b-%d-%y")
my.date
```

#### Date format symbols

- %d - Dat of the month (decimal number)
- %m - Month (decimal number)
- %b - Month (abbreviated)
- %B - Month (full name)
- %y - Year (2 digit)
- %Y - Year (4 digit)

#### Time

```{r}
as.POSIXct("11:02:03", format = "%H:%M:%S")
strptime("11:02:03", format = "%H:%M:%S")
Sys.time()
```


## Section 14 - Data Manipulation with R

### Lecture 61 - Data Manipulation Overwiew

2017-07-16 19:05:51 CEST

### Lecture 62 - Guide to Using Dplyr

2017-07-16 19:06:49 CEST

dplyr provides a flexible grammar of data manipulation

```{r, include=FALSE}
# dplyr masks some objects from packages stats and base
library(dplyr)
library(nycflights13)
```

`filter()` - much simplier filtering that bracket notation
```{r}
head(filter(flights,month==11,day==3,carrier=='AA'))
```

`slice()` - returns row by position
```{r}
slice(flights,1:10)
```

`arrange()` - orders the rows
```{r}
head(arrange(flights,year,month,day,desc(arr_time)))
```


### Lecture 63 - Guide to Using Dplyr - Part 2

2017-07-16 19:59:35 CEST

`select()` - easier syntax than bracket notation
```{r}
head(select(flights,carrier,arr_time,month))
```

`rename()`
```{r}
head(rename(flights,airline_carrier = carrier))
```

`distinct()` - select distinct values
```{r}
distinct(select(flights,carrier))
```

`mutate()` - adding columns being functions of existing columns
```{r}
head(mutate(flights,new_col = arr_delay - dep_delay))
```

`transmute()` - returns only new column
```{r}
head(transmute(flights,new_col = arr_delay - dep_delay))
```

`summarise()` - useful for aggregating rows
```{r}
summarise(flights,avg_air_time=mean(air_time,na.rm = T))
```

`sample_n()` - take a random number of rows
```{r}
sample_n(flights,10)
```

`sample_frac()` - take a random fraction of rows
```{r}
sample_frac(flights,0.01)
```

### Lecture 64 - Pipe Operator

2017-07-16 20:10:28 CEST

```{r}
df <- mtcars
# Nesting Dplyr
result <- arrange(sample_n(filter(df,mpg>20),size = 5),desc(mpg))
result

# Multiple Assignments
a <- filter(df,mpg>20)
b <- sample_n(a,size=5)
result2 <- arrange(b,desc(mpg))
result2

# Pipe Operator
result3 <- df %>% filter(mpg>20) %>% sample_n(size=5) %>% arrange(desc(mpg))
result3
```


### Lecture 65 - Quick note on Dplyr exercise

2017-07-16 20:18:02 CEST

There is a typo in the solutions for the question: Use pipe operators to get the mean hp value for cars with 6 cylinders. The answer should be around 122.2857 and not around 24.26049 , I accidentally showed Standard Deviation.

### Lecture 66 - Dplyr Training Exercise

2017-07-16 20:18:47 CEST

We will use the mtcars dataframe for this exercise!

```{r}
df <- mtcars
```


Return rows of cars that have an mpg value greater than 20 and 6 cylinders.

```{r}
df %>% filter(mpg>20 & cyl==6)
```

Reorder the Data Frame by cyl first, then by descending wt.
```{r}
df %>% arrange(cyl,desc(wt))
```

Select the columns mpg and hp

```{r}
select(df,'mpg','hp')
```

Select the distinct values of the gear column.

```{r}
distinct(select(df,'gear'))
```

Create a new column called "Performance" which is calculated by hp divided by wt.

```{r}
mutate(df,performance = hp/wt)
```

Find the mean mpg value using dplyr.

```{r}
summarise(df,avg_mpg=mean(mpg))
```

Use pipe operators to get the mean hp value for cars with 6 cylinders.

```{r}
df %>% filter(cyl == 6) %>% summarise(mean(hp)) 
```


### Lecture 67 - Dplyr Training Exercise - Solutions Walkthrough

Ok

### Lecture 68 - Guide to Using Tidyr

"2017-07-17 00:00:18 CEST"

How to clean and tidy up data

```{r, include=FALSE}
library(tidyr)
library(data.table)
```

Syntax of `data.table` is similar to `data.frame` but `data.table` is much faster

#### `gather()` and `spread()`

`gather()` - collapse multiple columns into key-pair values (kind of a pivot table)
```{r}
comp <- c(1,1,1,2,2,2,3,3,3)
yr <- c(1998,1999,2000,1998,1999,2000,1998,1999,2000)
q1 <- runif(9, min=0, max=100)
q2 <- runif(9, min=0, max=100)
q3 <- runif(9, min=0, max=100)
q4 <- runif(9, min=0, max=100)

df <- data.frame(comp=comp,year=yr,Qtr1 = q1,Qtr2 = q2,Qtr3 = q3,Qtr4 = q4)
df

gather(df,Quarter,Revenue,Qtr1:Qtr4)
```

`spread()` - complement of `gather()`

```{r}
stocks <- data.frame(
  time = as.Date('2009-01-01') + 0:9,
  X = rnorm(10, 0, 1),
  Y = rnorm(10, 0, 2),
  Z = rnorm(10, 0, 4)
)
stocks

stocks.gathered <- stocks %>% gather(stock,price,X,Y,Z)
stocks.gathered

stocks.gathered %>% spread(stock,price)
```

#### `separate()` and `unite()`

`separate()`
```{r}
df <- data.frame(new.col=c(NA,'a.x','b.y','c.z'))
df

# by default separates by non-alphanumeric separators
separate(df,new.col,c('ABC','XYZ'))

df <- data.frame(new.col=c(NA,'a-x','b-y','c-z'))
df

# still would work without given `sep` parameter
df.sep <- separate(data = df, col = new.col, into = c('ABC','XYZ'), sep = '-')
```

`unite()` - complement to `separate()`
```{r}
df.sep
unite(df.sep,new.joined.col,ABC,XYZ, sep = '---')
```


## Section 15 - Data Visualization with R

2017-07-17 14:34:43 CEST

### Lecture 69 - Overview of ggplot2

2017-07-17 14:34:53 CEST

```{r, include=FALSE}
library(ggplot2)
library(ggplot2movies)
```

- most popular data visualization package in R
- created by Hadley Wickham (authror of `dplyr` and `tidyr`)
- follows a distinct "Grammar of Graphics"
- built on idea of adding layers

#### `ggplot2` layers

1. Data (required)
1. Aesthetics (required)
1. Geometries (required)
1. Facets (pl. pÅ‚aszczyzny) (optional)
1. Statistics (optional)
1. Coordinates (optional)
1. Theme (optional)

Examples
```{r}
# Data
pl <- ggplot(data = mtcars)
pl
# Aesthetics
pl <- ggplot(data = mtcars, aes(x = mpg,y = hp))
pl
# Geometry (use help to access all geometries)
pl <- pl + geom_point()
pl
# Facets
pl <- pl + facet_grid(cyl~.)
pl
# Statistics
pl2 <- pl + stat_smooth()
pl2
# Coordinates
pl2 <- pl2 + coord_cartesian(xlim = c(15,25))
pl2
# Theme - can be downloaded or created
pl2 <- pl2 + theme_bw()
pl2
```



### Lecture 70 - Histograms

2017-07-18 22:30:26 CEST

```{r, include=FALSE}
library(ggplot2)
library(ggplot2movies)
```


```{r}
# data and aesthetics
pl <- ggplot(movies,aes(x = rating))
# geometry
pl2 <- pl + geom_histogram(binwidth = 0.1, color = 'red', fill = 'pink',alpha=0.4)

pl3 <- pl2 + xlab('Movie Rating') + ylab('Count')

pl3 <- pl3 + ggtitle('MYTITLE')
pl3

pl10 <- pl + geom_histogram(binwidth = 0.1, aes(fill=..count..)) + xlab('Movie Rating') + ylab('Count') + ggtitle('MY TITLE')
pl10
```

### Lecture 71 - Scatterplots

2017-07-18 23:57:34 CEST

```{r}
df <- mtcars
# data & aesthetics
pl <- ggplot(df,aes(x=wt,y=mpg))
# geometry
pl + geom_point()
# opacity
pl + geom_point(alpha = 0.5, size = 5)
# size based on continous variable
pl4 <- pl + geom_point(alpha = 0.5, aes(size = hp))
pl4
# use factor for discrete variables
pl5 <- pl + geom_point(alpha = 0.5, aes(size = factor(cyl)))
pl5
# use factor for discrete variables with shape and color
pl6 <- pl + geom_point(alpha = 1, size = 4, aes(shape = factor(cyl), color = factor(cyl)))
pl6
# more about color
pl7 <- pl + geom_point(size=5, color = '#00ffcc')
pl7
pl8 <- pl + geom_point(size=5, aes(color=hp)) + scale_color_gradient(low = 'blue', high = 'red')
pl8 
```

Hex color pickers can be found online

Including [color-hex.com](http://www.color-hex.com/)

### Lecture 72 - Barplots

2017-07-19 00:41:19 CEST

Count (occurences) for categorical data (e.g. car segment) instead of continous data (as for histogram, e.g. weight)

```{r}
df <- mpg
pl <- ggplot(df, aes(x=class)) # class is variable of df 
pl + geom_bar()
# use colors based on other column
pl + geom_bar(color='blue', fill = 'blue')
# to do so use aes() function
pl + geom_bar(aes(fill=drv))
# use position parameter to change displaying of bars (for easier comparing)
pl + geom_bar(aes(fill=drv), position = 'dodge') + ggtitle('dodge')
pl + geom_bar(aes(fill=drv), position = 'fill') + ggtitle('fill')
```


### Lecture 73 - Boxplots

2017-07-20 11:40:22 CEST

Boxplots, box-and-whisker plots or whiskerplots

```{r}
df <- mtcars
pl <- ggplot(df, aes(x=factor(cyl), y=mpg))
# boxplot
pl + geom_boxplot()
# reversed coordinates
pl + geom_boxplot() + coord_flip()
# separate colors for each cylinder
pl + geom_boxplot(aes(fill = factor(cyl)))
# id + theme
pl + geom_boxplot(aes(fill = factor(cyl))) + theme_dark()
```


### Lecture 74 - 2 Variable Plotting

2017-07-20 15:03:53 CEST

```{r}
pl <- ggplot(movies, aes(x = year, y = rating))
pl + geom_bin2d(binwidth = c(3,1)) + scale_fill_gradient(high = 'red', low = 'blue')
pl + geom_hex() + scale_fill_gradient(high = 'red', low = 'blue')
pl + geom_density_2d() + scale_fill_gradient(high = 'red', low = 'blue')
```


### Lecture 75 - Coordinates and Faceting

```{r}
pl <- ggplot(mpg,aes(x=displ,y=hwy)) + geom_point()

pl

pl + coord_cartesian(xlim = c(1,4), ylim = c(15,30))

pl + coord_fixed(ratio = 1/3)
```

Check documentation for `facet_grid`

Syntax may be confusing, here it goes:
```{r}
pl

# separate to 4 facets based on number of cylinders each of those cars has

# syntax: facet_grid(y_axis_separate ~ x_axis_separate)

pl + facet_grid(. ~ cyl)

pl + facet_grid(drv ~ .)

pl + facet_grid(drv ~ cyl)
```

### Lecture 76 - Themes

Final layer in grammar of graphics

`ggthemes` - package with themes

```{r}
theme_set(theme_classic())

pl <- ggplot(mtcars,aes(x=wt,y=mpg)) + geom_point()

pl

# set theme for all following plots

theme_set(theme_minimal())

pl

# set theme manually for one plot

pl + theme_dark()

# use ggthemes

require(ggthemes)

pl + theme_excel()

pl + theme_economist()

pl + theme_wsj()
```


### Lecture 77 - ggplot2 Exercises

Recreate the following plots shown below. Don't worry if your plots don't match exactly what is shown below, as long as you have a general understanding of ggplot2 and the grammar of graphics

For the first few plots, use the mpg dataset
```{r}
require(ggplot2)
require(ggthemes)
```

Histogram of hwy mpg values:
```{r}
# my solution, ok
ggplot(mpg, aes(x=hwy)) + geom_histogram(fill = 'red', alpha = 0.4)
# exact solution
ggplot(mpg, aes(x=hwy)) + geom_histogram(bins = 20, fill = 'red', alpha = 0.4)
```

Barplot of car counts per manufacturer with color fill defined by cyl count

```{r}
# my solution, ok
pl0 <- ggplot(mpg, aes(x=manufacturer, fill = factor(cyl))) + geom_bar()
pl0
# exact solution
pl1 <- ggplot(mpg,aes(x=manufacturer)) + geom_bar(aes(fill=factor(cyl))) + theme_gdocs()
pl1
```

Switch now to use the txhousing dataset that comes with ggplot2

Create a scatterplot of volume versus sales. Afterwards play around with alpha and color arguments to clarify information.

```{r}
# my solution, ok
pl0 <- ggplot(txhousing, aes(x = sales, y = volume)) + geom_point( alpha = 0.4, color = 'blue') + theme_gray()
pl0 
# exact solution
pl1 <- ggplot(txhousing,aes(x=sales,y=volume)) + geom_point(color='blue',alpha=0.5)
pl1
```

Add a smooth fit line to the scatterplot from above. Hint: You may need to look up geom_smooth()

```{r}
# the same as in solution
pl0 + geom_smooth(color = 'red')
```


### Lecture 78 - ggplot2 Exercise Solutions Walkthrough

Ok, comparison in Lecture 77

## Section 16 - Data Visualization Project

### Lecture 79 - Data Visualization Project

For this optional assignment we will be recreating this plot from The Economist:

![](Economist1.png)

Import libraries and dataframe

```{r}
require(ggplot2)
require(data.table)
df <- fread("Economist_Assignment_Data.csv", drop = 1)
head(df)
```

Create scatterplot

```{r}
pl2 <- ggplot(df, aes(x = CPI, y = HDI, color = Region)) + geom_point(shape = 1, size = 5) + geom_smooth(aes(group=1), method = 'lm', formula = y ~log(x), se = F, color = 'red')
pl2
```

Labeling

```{r}
pl <- ggplot(df, aes(x = CPI, y = HDI, color = Region)) + geom_point(shape = 1, size = 5) + geom_smooth(aes(group=1), method = 'lm', formula = y ~log(x), se = F, color = 'red') + geom_text(aes(label=Country))
pl
```

Subset labeling

```{r}
pointsToLabel <- c("Russia", "Venezuela", "Iraq", "Myanmar", "Sudan",
                   "Afghanistan", "Congo", "Greece", "Argentina", "Brazil",
                   "India", "Italy", "China", "South Africa", "Spane",
                   "Botswana", "Cape Verde", "Bhutan", "Rwanda", "France",
                   "United States", "Germany", "Britain", "Barbados", "Norway", "Japan",
                   "New Zealand", "Singapore")

pl3 <- pl2 + geom_text(aes(label = Country), color = "gray20", 
                data = subset(df, Country %in% pointsToLabel),check_overlap = TRUE)

pl3
```

Finishing

```{r}
pl4 <- pl3 + theme_bw() + scale_x_continuous(name = "Corruption perception index, 2011 (10 = least corrupt)", limits = c(1,10), breaks = 1:10) + scale_y_continuous(name = "Human Development Index, 2011 (1=best)", limits = c(0.2,1.0), breaks = c(0.2,0.4,0.6,0.8,1.0))
pl4
```



### Lecture 80 - Data Visualization Project - Solutions Walkthrough - Part 1

### Lecture 81 - Data Visualization Project Solutions Walkthrough - Part 2

## Section 17 - Interactive Visualizations with Plotly

### Lecture 82 - Overview of Plotly and Interactive Visualizations

### Lecture 83 - Resources for Plotly and ggplot2

## Section 18 - Capstone Data Project

### Lecture 84 - Introduction to Capstone Project

### Lecture 85 - Capstone Project Solutions Walkthrough

## Section 19 - Introduction to Machine Learning with R

### Lecture 86 - ISLR PDF

### Lecture 87 - Introduction to Machine Learning

resources: Machine Learning Slides.zip

## Section 20 - Machine Learning with R - Linear Regression

### Lecture 88 - Introduction to Linear Regression

### Lecture 89 - Linear Regression with R - Part 1

### Lecture 90 - Linear Regression with R - Part 2

### Lecture 91 - Linear Regression with R - Part 3

## Section 21 - Machine Learning Project - Linear Regression

### Lecture 92 - Introduction to Linear Regression Project

### Lecture 93 - ML - Linear Regression Project - Solutions Part 1

### Lecture 94 - ML - Linear Regression Project - Solutions Part 2

## Section 22 - Machine Learning with R - Logistic Regression

### Lecture 95 - Introduction to Logistic Regression

### Lecture 96 - Logistic Regression with R - Part 1

### Lecture 97 - Logistic Regression with R - Part 2

## Section 23 - Machine Learning Project - Logistic Regression

### Lecture 98 - Introduction to Logistic Regression Project

### Lecture 99 - Logistic Regression Project Solutions - Part 1

### Lecture 100 - Logistic Regression Project Solutions - Part 2

### Lecture 101 - Logistic Regression Project - Solutions Part 3

## Section 24 - Machine Learning with R - K Nearest Neighbors

### Lecture 102 - Introduction to K Nearest Neighbors

### Lecture 103 - K Nearest Neighbors with R

## Section 25 - Machine Learning Project - K Nearest Neighbors

### Lecture 104 - Introduction K Nearest Neighbors Project

### Lecture 105 - K Nearest Neighbors Project Solutions

## Section 26 - Machine Learning with R - Decision Trees and Random Forests

### Lecture 106 - Introduction to Tree Methods

### Lecture 107 - Decision Trees and Random Forests with R

## Section 27 - Machine Learning Project - Decision Trees and Random Forests

### Lecture 108 - Introduction to Decision Trees and Random Forests Project

### Lecture 109 - Tree Methods Project Solutions - Part 1

### Lecture 110 - Tree Methods Project Solutions - Part 2

## Section 28 - Machine Learning with R - Support Vector Machines

### Lecture 111 - Introduction to Support Vector Machines

### Lecture 112 - Support Vector Machines with R

## Section 29 - Machine Learning Project - Support Vector Machines

### Lecture 113 - Introduction to SVM Project

### Lecture 114 - Support Vector Machines Project - Solutions Part 1

### Lecture 115 - Support Vector Machines Project - Solutions Part 2

## Section 30 - Machine Learning with R - K-means Clustering

### Lecture 116 - Introduction to K-Means Clustering

### Lecture 117 - K Means Clustering with R

## Section 31 - Machine Learning Project - K-means Clustering

### Lecture 118 - Introduction to K Means Clustering Project

### Lecture 119 - K Means Clustering Project - Solutions Walkthrough

## Section 32 - Machine Learning with R - Natural Language Processing

### Lecture 120 - Introduction to Natural Language Processing

### Lecture 121 - Natural Language Processing with R - Part 1

### Lecture 122 - Natural Language Processing with R - Part 2

## Section 33 - Machine Learning with R - Neural Nets

### Lecture 123 - Introduction to Neural Nets

### Lecture 124 - Neural Nets with R

## Section 34 - Machine Learning Project - Neural Nets

### Lecture 125 - Introduction to Neural Nets Project

### Lecture 126 - Neural Nets Project - Solutions

## Section 35 - Bonus Section - Discounts for Other Courses

### Lecture 127 - Bonus Discount Coupons
